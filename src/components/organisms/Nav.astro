---
import { company, navLinks } from '../../data/company';
---

<header
  id="main-nav"
  class="fixed top-0 left-0 right-0 z-[1000] h-[90px] flex items-center justify-between px-[4vw]
         bg-obsidian-900/92 backdrop-blur-xl border-b border-gold/15
         transition-all duration-400
         [&.nav-scrolled]:h-[72px] [&.nav-scrolled]:bg-obsidian-900/98 [&.nav-scrolled]:border-gold/25"
  role="banner"
>
  <!-- FIX 1: Recontinuum Logo in header using actual image file -->
  <a href="/" class="flex items-center flex-shrink-0 group" aria-label={company.name}>
    <img
      src="/images/logo.png"
      alt="Recontinuum"
      width="180"
      height="60"
      class="h-[56px] w-auto object-contain brightness-0 invert
             transition-all duration-400
             [.nav-scrolled_&]:h-[44px]
             sm:h-[46px] xs:h-[38px]"
      loading="eager"
      decoding="async"
      onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
    />
    <!-- Fallback text if image fails -->
    <span style="display:none;" class="text-gold font-serif text-xl tracking-widest uppercase">
      Recontinuum
    </span>
  </a>

  <!-- Right side: links + CTA -->
  <div class="flex items-center gap-10">
    <nav class="hidden md:flex items-center gap-8" role="navigation" aria-label="Main navigation">
      {navLinks.map(link => (
        <a
          href={link.href}
          class="font-sans text-[11px] tracking-[0.2em] uppercase text-silver/80
                 hover:text-gold transition-colors duration-300"
        >
          {link.label}
        </a>
      ))}
    </nav>

    <a
      href="#contact"
      class="hidden sm:inline-flex items-center gap-2 px-5 py-2.5
             border border-gold/60 text-gold font-sans text-[10px] tracking-[0.2em] uppercase
             hover:bg-gold hover:text-obsidian-900 transition-all duration-300"
    >
      Engage â†—
    </a>

    <button
      id="mobile-menu-btn"
      class="md:hidden flex flex-col gap-[5px] p-2"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <span class="w-6 h-[1.5px] bg-gold transition-all duration-300"></span>
      <span class="w-6 h-[1.5px] bg-gold transition-all duration-300"></span>
      <span class="w-6 h-[1.5px] bg-gold transition-all duration-300"></span>
    </button>
  </div>
</header>

<!-- Mobile menu -->
<div
  id="mobile-menu"
  class="fixed top-[90px] left-0 right-0 z-[999] bg-obsidian-900/98 backdrop-blur-xl
         border-b border-gold/15 py-6 px-[4vw]
         translate-x-full transition-transform duration-300"
>
  <nav class="flex flex-col gap-5">
    {navLinks.map(link => (
      <a
        href={link.href}
        class="mobile-nav-link font-sans text-[12px] tracking-[0.2em] uppercase
               text-silver/80 hover:text-gold transition-colors duration-300 py-1"
      >
        {link.label}
      </a>
    ))}
    <a
      href="#contact"
      class="mt-2 inline-flex items-center gap-2 px-5 py-3 w-fit
             border border-gold/60 text-gold font-sans text-[10px] tracking-[0.2em] uppercase
             hover:bg-gold hover:text-obsidian-900 transition-all duration-300"
    >
      Engage â†—
    </a>
  </nav>
</div>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const links = document.querySelectorAll('.mobile-nav-link');

  btn?.addEventListener('click', () => {
    const isOpen = btn.getAttribute('aria-expanded') === 'true';
    btn.setAttribute('aria-expanded', String(!isOpen));
    menu?.classList.toggle('translate-x-full');
  });

  links.forEach(l => l.addEventListener('click', () => {
    btn?.setAttribute('aria-expanded', 'false');
    menu?.classList.add('translate-x-full');
  }));

  // Scroll effect
  const nav = document.getElementById('main-nav');
  window.addEventListener('scroll', () => {
    nav?.classList.toggle('nav-scrolled', window.scrollY > 50);
  }, { passive: true });
</script>
